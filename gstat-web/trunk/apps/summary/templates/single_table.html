{%  extends "base_gstat.html" %}

{% block description %}Here you can put short description what application does, authors list and whatever you can come up with.{% endblock %}

{% block app-info %}{% endblock %}

{% block css-add %}
<link rel="stylesheet" type="text/css" href="/media/core/css/dataTables.css" />
<link rel="stylesheet" type="text/css" href="/media/core/css/TableTools.css" />
<link rel="stylesheet" type="text/css" href="/media/summary/css/percentbar_style.css" />
<link rel="stylesheet" type="text/css" href="/media/summary/css/nagios.css" />
{% endblock %}

{% block scripts-add %}
<script type="text/javascript" src="/media/core/scripts/jquery.js"></script>
<script type="text/javascript" src="/media/core/scripts/jquery.dataTables.js"></script>
<script type="text/javascript" src="/media/core/scripts/ZeroClipboard.js"></script>
<script type="text/javascript" src="/media/core/scripts/TableTools.js"></script>
<script type="text/javascript" src="/media/summary/scripts/percentbar_progress.js" ></script>
<script type="text/javascript" src="/media/summary/scripts/summary.js" ></script>
<script type="text/javascript" charset="utf-8">
$(document).ready(function() {
    $('#single_table').dataTable({
        "bProcessing": true, 
        "DisplayLength": 25, 
        "sAjaxSource": 'json', 
        "sDom": 'T<"clear">lfrtip',
        "aoColumns": [
            { sWidth: '50px', sClass: 'orderAction',
              "fnRender": function(oObj) {
                 var url = document.URL;
                 if (url.split("/gstat/summary/")[1].length == 0) {
                   var link = '<a href="/gstat/summary/GRID/'+oObj.aData[0]+'/">'+oObj.aData[0]+'</a>';
                 } else {
                   if (url[url.length-1] == '/') url = url.slice(0,length-1);
                   if (url.split("/gstat/summary/")[1].split("/").length == 1) {
                     var type = url.split("/gstat/summary/")[1].split("/");
                    var link = '<a href="/gstat/summary/'+type+'/'+oObj.aData[0]+'/">'+oObj.aData[0]+'</a>';
                   } else if (url.split("/gstat/summary/")[1].split("/").length == 2){
                     var link = '<a href="/gstat/site/'+oObj.aData[0]+'/">'+oObj.aData[0]+'</a>';
                   } 
                 }
                 return link;
                },
              "bUseRendered": false
            },
            { "fnRender": function(oObj) {
                 var status = '<span class="NagiosStatus_'+oObj.aData[1]+'">'+oObj.aData[1]+'</span>';
                 return status;
                },
              "bUseRendered": false
            },
            { sWidth: null },
            { sWidth: null },
            { sWidth: null },
            { "fnRender": function(oObj) {
                var used_space = display_string(oObj.aData[4], oObj.aData[5]);
                return used_space;
                },
              "bUseRendered": false
            },
            { sWidth: '16px', bSortable: false },
            { "fnRender": function(oObj) {
                var used_space = display_string(oObj.aData[3], oObj.aData[7]);
                return used_space;
                },
              "bUseRendered": false
            },
            { "fnRender": function(oObj) {
                var used_space = display_string(oObj.aData[6], oObj.aData[8]);
                return used_space;
                },
              "bUseRendered": false,
              sWidth: '110px'
            }]
    });
    
    var url = document.URL.split("/gstat/summary/")[1];
    if (url[url.length-1] == '/') url = url.slice(0,length-1);
    if (url.split("/").length == 2) $('#sites_or_status').text('Monitoring Status');
    else $('#sites_or_status').text('Sites'); 
})
</script>
{% endblock %}

{% block breadcrumbs %}
    {% for item in breadcrumbs_list %}
        {% if forloop.last %}
            <a href="{{ item.url }}">{{ item.name }}</a>
        {% else %}
            <a href="{{ item.url }}">{{ item.name }}</a>::
        {% endif %}
    {% endfor %}
{% endblock %}

{% block content-main %}
<div id="TableContainer">
  <table cellpadding="0" cellspacing="1" border="0" class="display" id="single_table">
    <thead>
      <tr>
        <th rowspan=2>Name</th>
        <th rowspan=2 id="sites_or_status">Sites</th>
        <th colspan=2>CPUs</th>
        <th colspan=2>Storage Space (GB)</th>
        <th colspan=3>Grid Jobs</th>
      </tr>
      <tr>
        <th>Physical</th>
        <th>Logical</th>
        <th>Total</th>
        <th>Used</th>
        <th>Total</th>
        <th>Running</th>
        <th>Waiting</th>
      </tr>
    </thead>
    <tbody>
    </tbody>
  </table>
</div>
<div class="spacer"></div>
<div id="group_or_site" style="visibility: hidden;" title="group"></div>
{% endblock %}

