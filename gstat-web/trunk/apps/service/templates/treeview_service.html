{%  extends "base_gstat.html" %}

{% block description %}Here you can put short description what application does, authors list and whatever you can come up with.{% endblock %}

{% block app-info %}{% endblock %}

{% block css-add %}
<link rel="stylesheet" type="text/css" href="/media/gridsite/css/site.css" />
<link rel="stylesheet" type="text/css" href="/media/core/css/tablesorter.css" />
<link rel="stylesheet" type="text/css" href="/media/core/css/jquery.treeview.css" />
{% endblock %}

{% block scripts-add %}
<script type="text/javascript" src="/media/gridsite/scripts/site.js"></script>
<script type="text/javascript" src="/media/core/scripts/jquery.js"></script>
<script type="text/javascript" src="/media/core/scripts/jquery.tablesorter.js"></script>
<script type="text/javascript" src="/media/core/scripts/jquery.treeview.js"></script>
<script type="text/javascript">
	$(document).ready(function(){
		$("#tree").treeview();
	});
</script>
{% endblock %}

{% block breadcrumbs %}{% endblock %}

{% block content-main %}

{% load dict_tags %}

<div>
  <div id="left-board" class="board">
    <h2>Service Components</h2>
    <div style="overflow: auto; height: 350px;">
    <ul id="tree" class="filetree treeview">
      <li>
        <span class="folder">&nbsp; Service </span>
        <ul>
        
        
          {% if tree_topbdii %}
          <li class='{{ collapse.bdii_top|default:"closed" }}'>
            <span class="folder"> &nbsp; Top BDII </span>
            <ul>
              {% for hostname,checks in tree_topbdii %}
              
              <li class='{{ collapse|dict_get:hostname|default:"closed" }}'>
                <span class="ce">
                  <a target="frame" href="/gstat/service/bdii_top/{{ hostname }}/all/">{{ hostname }}</a>
                </span>
                <ul>
                  {% for check in checks %}
                  
                  <li class="closed">
                    <span class="validation">
                      <a target="frame" href="/gstat/service/bdii_top/{{ hostname }}/{{ check }}/">{{ check }}</a>
                    </span>
                    <ul id="ul_{{ forloop.counter }}">
                      <script>
		                var datasources = DataSources("{{ check }}");
		                for (datasource in datasources) {
		                    var link = '<a target="frame" href="/gstat/rrd/Nagios/{{ hostname }}/{{ check }}/'+datasources[datasource]+'/">&nbsp;'+datasources[datasource]+'</a>'
		                    $('#ul_{{ forloop.counter }}').append(
		                       $('<li></li>').append(
		                         $('<span></span>').attr({'className':'datasource'}).html(link)
		                       )
		                    );
		                    //document.write('<li><span class="datasource">'+link+'</span></li>');
		                }
		                $('#ul_{{ forloop.counter }}').removeAttr('id');
                     </script>
                    </ul>
                  </li>
                  
                  {% endfor %}
                </ul>
              </li>
              
              {% endfor %}
            </ul>
          </li>
          {% endif %}
          
          
          {% if tree_sitebdii %}
          <li class='{{ collapse.bdii_site|default:"closed" }}'>
            <span class="folder"> &nbsp; Site BDII </span>
            <ul>
              {% for hostname,checks in tree_sitebdii %}
              
              <li class='{{ collapse|dict_get:hostname|default:"closed" }}'>
                <span class="ce">
                  <a target="frame" href="/gstat/service/bdii_site/{{ hostname }}/all/">&nbsp;{{ hostname }}</a>
                </span>
                <ul>
                  {% for check in checks %}
                  
                  <li class="closed">
                    <span class="validation">
                      <a target="frame" href="/gstat/service/bdii_site/{{ hostname }}/{{ check }}/">&nbsp;{{ check }}</a>
                    </span>
                    <ul id="ul_{{ forloop.counter }}">
                      <script>
		                var datasources = DataSources("{{ check }}");
		                for (datasource in datasources) {
		                    var link = '<a target="frame" href="/gstat/rrd/Nagios/{{ hostname }}/{{ check }}/'+datasources[datasource]+'/">&nbsp;'+datasources[datasource]+'</a>'
		                    $('#ul_{{ forloop.counter }}').append(
		                       $('<li></li>').append(
		                         $('<span></span>').attr({'className':'datasource'}).html(link)
		                       )
		                    );
		                    //document.write('<li><span class="datasource">'+link+'</span></li>');
		                }
		                $('#ul_{{ forloop.counter }}').removeAttr('id');
                     </script>
                    </ul>
                  </li>
                  
                  {% endfor %}
                </ul>
              </li>
              
              {% endfor %}
            </ul>
          </li>
          {% endif %}          
          
          
        </ul>
      </li>
    </ul>
    </div>
  </div>
  <div id="middle-right-board" class="board" >
    <h2>Viewing Testing Results or Statistics Graphs</h2>
    <iframe name="frame" src="{{ url }}" frameborder="0" height="350px" width="100%" scrolling="yes" allowtransparency="true" style="overflow:auto">
    </iframe>
  </div>
  <div class="clear"/>
</div>


{% endblock %}