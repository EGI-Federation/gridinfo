{%  extends "base_gstat.html" %}

{% block description %}Here you can put short description what application does, authors list and whatever you can come up with.{% endblock %}

{% block app-info %}{% endblock %}

{% block css-add %}
<link rel="stylesheet" type="text/css" href="/media/core/css/dataTables.css" />
<link rel="stylesheet" type="text/css" href="/media/core/css/TableTools.css" />
<link rel="stylesheet" type="text/css" href="/media/summary/css/percentbar_style.css" />
<link rel="stylesheet" type="text/css" href="/media/summary/css/nagios.css" />
{% endblock %}

{% block scripts-add %}
<script type="text/javascript" src="/media/core/scripts/jquery.js"></script>
<script type="text/javascript" src="/media/core/scripts/jquery.dataTables.js"></script>
<script type="text/javascript" src="/media/core/js/TableTools.js"></script>
<script type="text/javascript" src="/media/core/ZeroClipboard/ZeroClipboard.js"></script>
<script type="text/javascript" src="/media/summary/scripts/percentbar_progress.js" ></script>
<script type="text/javascript" src="/media/summary/scripts/percentbar_tooltip.js" ></script>
<script type="text/javascript" charset="utf-8">

$.fn.dataTableExt.oApi.fnReloadAjax = function ( oSettings, sNewSource, fnCallback )
{
if ( typeof sNewSource != 'undefined' )
{
oSettings.sAjaxSource = sNewSource;
}
this.fnClearTable( this );
this.oApi._fnProcessingDisplay( oSettings, true );
var that = this;

$.getJSON( oSettings.sAjaxSource, null, function(json) {
/* Got the data - add it to the table */
for ( var i=0 ; i<json.aaData.length ; i++ )
				     {
				     that.oApi._fnAddData( oSettings, json.aaData[i] );
				     }
				     
				     oSettings.aiDisplay = oSettings.aiDisplayMaster.slice();
				     that.fnDraw( that );
				     that.oApi._fnProcessingDisplay( oSettings, false );
				     
				     /* Callback user function - for event handlers etc */
				     if ( typeof fnCallback == 'function' )
				     {
				     fnCallback( oSettings );
				     }
				     } );
}

$(document).ready(function() {
        // dataTable script initialization using jQuery selectors
        $('#single_table').dataTable( {
        "bProcessing": true,
        "iDisplayLength":25,
        "sAjaxSource": 'json',
        "sDom": 'T<"clear">lfrtip',
	"aoColumns": [
            { "fnRender": function(oObj) {
	    var link = '<a href="/gstat/service/'+oObj.aData[0]+'/">'+oObj.aData[0]+'</a>';
             return link;
             },
             "bUseRendered": false
            },
null, 
        { "fnRender": function(oObj) {
            var status = '<span class="NagiosStatus_'+oObj.aData[2]+'">'+oObj.aData[2]+'</span>';
	    return status;
	    },
         "bUseRendered": false,
         "sType": "status" }, 
        { "fnRender": function(oObj) {
            var status = '<span class="NagiosStatus_'+oObj.aData[3]+'">'+oObj.aData[3]+'</span>';
	    return status;
	    },
         "bUseRendered": false,
         "sType": "status" } 

 ] 
        });
});

$('#content-main a').attr({"target":"_self"});      // here you can set up default targets for all heperlinks in content section

    
function changeFilterValue(event) {
    filtertype = document.getElementById('filtertype');
    filtervalue = document.getElementById('filtervalue');
        
    /* Example call to load a new file */
    var oTable;
    $(document).ready(function() {
        var oTable = $('#single_table').dataTable();
        oTable.fnReloadAjax( filtertype.value + "/" + filtervalue.value + "/json" );
    });
}



</script>
{% endblock %}

{% block breadcrumbs %}
    {% for item in breadcrumbs_list %}
        {% if forloop.last %}
            <a href="{{ item.url }}">{{ item.name }}</a>
        {% else %}
            <a href="{{ item.url }}">{{ item.name }}</a>::
        {% endif %}
    {% endfor %}
{% endblock %}

{% block content-main %}
<table cellpadding="0" cellspacing="1" border="0" class="display" id="single_table">
  <thead>
    <tr>{% for col in thead %}
      <th>{{col}}</th>
      {% endfor %}
    </tr>
  </thead>
  <tbody>
    
    </tbody>
</table>

<div class="spacer"></div>
{% endblock %}

